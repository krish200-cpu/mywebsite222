<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>FuneralMatch | Arrangement Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* --- 1. DESIGN SYSTEM (Ethereal) --- */
        :root {
            --bg-deep: #050505;
            --bg-glass: rgba(20, 20, 20, 0.6);
            --gold: #D4AF37;
            --gold-dim: rgba(212, 175, 55, 0.1);
            --border: rgba(255, 255, 255, 0.1);
            --ease-out: cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        body {
            background-color: var(--bg-deep);
            background-image: radial-gradient(circle at 50% 0%, #151515 0%, #000 70%);
            color: white;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            padding-bottom: 120px; /* Space for bottom bar */
        }

        /* --- 2. HEADER --- */
        .app-bar {
            position: sticky; top: 0; z-index: 50;
            background: rgba(8, 8, 8, 0.9); backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            height: 70px; display: flex; align-items: center; justify-content: space-between;
            padding: 0 24px;
        }

        /* --- 3. ACCORDION SECTIONS --- */
        .module {
            border-bottom: 1px solid var(--border);
            transition: background 0.3s;
        }
        .module.active { background: rgba(255,255,255,0.02); }

        .module-header {
            padding: 24px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
        }
        .module-title { font-family: 'Bodoni Moda', serif; font-size: 20px; color: white; }
        .module-meta { font-size: 11px; text-transform: uppercase; color: #666; letter-spacing: 0.1em; margin-bottom: 4px; }
        
        .selection-preview { font-size: 12px; color: var(--gold); margin-top: 4px; display: flex; align-items: center; gap: 6px; }
        .module-icon { transition: transform 0.3s var(--ease-out); color: #444; }
        .module.active .module-icon { transform: rotate(180deg); color: white; }

        .module-body {
            max-height: 0; overflow: hidden; transition: max-height 0.5s var(--ease-out);
        }
        .module.active .module-body { max-height: 1000px; /* Arbitrary large number for slide effect */ }

        /* --- 4. OPTION CARDS --- */
        .grid-options {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px; padding: 0 24px 32px 24px;
        }

        .option-card {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            border-radius: 12px; padding: 20px;
            cursor: pointer; transition: 0.2s; position: relative;
            display: flex; flex-direction: column; align-items: flex-start; justify-content: space-between;
            min-height: 140px;
        }
        .option-card:hover { border-color: #444; background: rgba(255,255,255,0.05); }
        
        /* Selected State */
        .option-card.selected {
            background: var(--gold-dim); border-color: var(--gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
        }
        .option-card.selected .check-icon { opacity: 1; transform: scale(1); }

        .card-icon { font-size: 24px; color: #666; margin-bottom: 12px; }
        .option-card.selected .card-icon { color: var(--gold); }

        .card-title { font-size: 13px; font-weight: 600; margin-bottom: 4px; }
        .card-desc { font-size: 10px; color: #888; line-height: 1.4; }
        
        .card-price { 
            margin-top: auto; padding-top: 12px; 
            font-size: 12px; font-weight: 700; color: white; 
        }

        .check-icon {
            position: absolute; top: 12px; right: 12px;
            width: 20px; height: 20px; background: var(--gold); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: black; font-size: 10px; opacity: 0; transform: scale(0.5);
            transition: 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* --- 5. BOTTOM LEDGER (Sticky Footer) --- */
        .ledger-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 20px 24px; z-index: 60;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }

        .total-label { font-size: 10px; text-transform: uppercase; color: #666; font-weight: 700; display: block; margin-bottom: 2px; }
        .total-amount { font-family: 'Bodoni Moda', serif; font-size: 24px; color: var(--gold); }

        .btn-action {
            background: var(--gold); color: black;
            padding: 12px 32px; border-radius: 999px;
            font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em;
            transition: 0.2s;
        }
        .btn-action:hover { background: white; transform: translateY(-2px); }

    </style>
</head>
<body>

    <header class="app-bar">
        <div>
            <span class="text-[9px] uppercase font-bold text-[#D4AF37] tracking-widest block">FuneralMatch</span>
            <span class="text-sm font-bold text-white">Direct Arrangement</span>
        </div>
        <div class="text-xs text-gray-500 font-medium">
            <i class="fas fa-lock mr-1"></i> Secure Configuration
        </div>
    </header>

    <main class="max-w-3xl mx-auto pt-10">

        <section class="module active" id="mod-service">
            <div class="module-header" onclick="toggleModule('mod-service')">
                <div>
                    <div class="module-meta">Step 1</div>
                    <div class="module-title">The Service</div>
                    <div class="selection-preview" id="preview-service">Select Option</div>
                </div>
                <i class="fas fa-chevron-down module-icon"></i>
            </div>
            <div class="module-body">
                <div class="grid-options">
                    <div class="option-card" onclick="selectOption('service', 'direct', 995, 'Direct Cremation (Unattended)')">
                        <i class="fas fa-leaf card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Direct Cremation</div>
                            <div class="card-desc">A respectful cremation without mourners present. Ashes returned directly.</div>
                        </div>
                        <div class="card-price">£995</div>
                    </div>
                    <div class="option-card" onclick="selectOption('service', 'simple', 1850, 'Simple Service')">
                        <i class="fas fa-church card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Simple Service</div>
                            <div class="card-desc">An intimate service at the crematorium chapel for close family.</div>
                        </div>
                        <div class="card-price">£1,850</div>
                    </div>
                    <div class="option-card" onclick="selectOption('service', 'traditional', 2900, 'Traditional Service')">
                        <i class="fas fa-users card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Traditional</div>
                            <div class="card-desc">Full service with hearse, conductor, and bearers.</div>
                        </div>
                        <div class="card-price">£2,900</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="module" id="mod-coffin">
            <div class="module-header" onclick="toggleModule('mod-coffin')">
                <div>
                    <div class="module-meta">Step 2</div>
                    <div class="module-title">The Coffin</div>
                    <div class="selection-preview" id="preview-coffin">Standard Included</div>
                </div>
                <i class="fas fa-chevron-down module-icon"></i>
            </div>
            <div class="module-body">
                <div class="grid-options">
                    <div class="option-card selected" onclick="selectOption('coffin', 'oak', 0, 'Oak Veneer (Included)')">
                        <i class="fas fa-box card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Oak Veneer</div>
                            <div class="card-desc">Simple, dignified wood effect. Included in standard price.</div>
                        </div>
                        <div class="card-price">Included</div>
                    </div>
                    <div class="option-card" onclick="selectOption('coffin', 'willow', 450, 'Natural Willow')">
                        <i class="fas fa-seedling card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Natural Willow</div>
                            <div class="card-desc">Hand-woven, eco-friendly, and softer in appearance.</div>
                        </div>
                        <div class="card-price">+£450</div>
                    </div>
                    <div class="option-card" onclick="selectOption('coffin', 'mahogany', 800, 'Solid Mahogany')">
                        <i class="fas fa-tree card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Solid Mahogany</div>
                            <div class="card-desc">Premium dark wood with raised lid and superior finish.</div>
                        </div>
                        <div class="card-price">+£800</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="module" id="mod-transport">
            <div class="module-header" onclick="toggleModule('mod-transport')">
                <div>
                    <div class="module-meta">Step 3</div>
                    <div class="module-title">Transport</div>
                    <div class="selection-preview" id="preview-transport">Hearse Only</div>
                </div>
                <i class="fas fa-chevron-down module-icon"></i>
            </div>
            <div class="module-body">
                <div class="grid-options">
                    <div class="option-card selected" onclick="selectOption('transport', 'hearse', 0, 'Hearse Only')">
                        <i class="fas fa-car card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">Hearse Only</div>
                            <div class="card-desc">Meeting the family directly at the place of service.</div>
                        </div>
                        <div class="card-price">Included</div>
                    </div>
                    <div class="option-card" onclick="selectOption('transport', 'limo1', 250, '1 Limousine')">
                        <i class="fas fa-car-side card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">1 Limousine</div>
                            <div class="card-desc">Chauffeur driven. Seats up to 7 mourners comfortably.</div>
                        </div>
                        <div class="card-price">+£250</div>
                    </div>
                    <div class="option-card" onclick="selectOption('transport', 'limo2', 500, '2 Limousines')">
                        <i class="fas fa-car-side card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">2 Limousines</div>
                            <div class="card-desc">Transport for up to 14 mourners.</div>
                        </div>
                        <div class="card-price">+£500</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="module" id="mod-paper">
            <div class="module-header" onclick="toggleModule('mod-paper')">
                <div>
                    <div class="module-meta">Step 4</div>
                    <div class="module-title">Stationery</div>
                    <div class="selection-preview" id="preview-paper">None</div>
                </div>
                <i class="fas fa-chevron-down module-icon"></i>
            </div>
            <div class="module-body">
                <div class="grid-options">
                    <div class="option-card selected" onclick="selectOption('paper', 'none', 0, 'No Stationery')">
                        <i class="fas fa-ban card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">None</div>
                            <div class="card-desc">I do not require printed orders of service.</div>
                        </div>
                        <div class="card-price">£0</div>
                    </div>
                    <div class="option-card" onclick="selectOption('paper', '50', 120, '50 Copies')">
                        <i class="fas fa-book-open card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">50 Booklets</div>
                            <div class="card-desc">Professionally designed and printed on card stock.</div>
                        </div>
                        <div class="card-price">+£120</div>
                    </div>
                    <div class="option-card" onclick="selectOption('paper', '100', 180, '100 Copies')">
                        <i class="fas fa-book-open card-icon"></i>
                        <div class="check-icon"><i class="fas fa-check"></i></div>
                        <div>
                            <div class="card-title">100 Booklets</div>
                            <div class="card-desc">For larger gatherings. Includes photo printing.</div>
                        </div>
                        <div class="card-price">+£180</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div class="ledger-bar">
        <div>
            <span class="total-label">Estimated Total</span>
            <span class="total-amount" id="total-price">£0</span>
        </div>
        <button onclick="submitArrangement()" class="btn-action">
            Submit Plan <i class="fas fa-arrow-right ml-2"></i>
        </button>
    </div>

    <script>
        // === STATE ===
        const config = {
            service: { price: 0, name: '' },
            coffin: { price: 0, name: 'Oak Veneer (Included)' },
            transport: { price: 0, name: 'Hearse Only' },
            paper: { price: 0, name: 'None' }
        };

        // === LOGIC ===
        function toggleModule(id) {
            const el = document.getElementById(id);
            // Close others (Accordion behavior)
            document.querySelectorAll('.module').forEach(m => {
                if(m.id !== id) m.classList.remove('active');
            });
            el.classList.toggle('active');
        }

        function selectOption(category, id, price, niceName) {
            // 1. Update Data
            config[category] = { price, name: niceName };

            // 2. Update Visuals (Selected Card)
            const section = document.getElementById(`mod-${category}`);
            section.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            // 3. Update Preview Text
            document.getElementById(`preview-${category}`).innerHTML = `<i class="fas fa-check text-xs"></i> ${niceName}`;

            // 4. Recalculate Total
            updateTotal();

            // 5. Auto-advance (UX Polish)
            // Wait 400ms then open next section if it exists
            const nextMap = { 'mod-service': 'mod-coffin', 'mod-coffin': 'mod-transport', 'mod-transport': 'mod-paper' };
            const nextId = nextMap[section.id];
            if(nextId) {
                setTimeout(() => {
                    toggleModule(nextId);
                    // Scroll to it
                    document.getElementById(nextId).scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 400);
            }
        }

        function updateTotal() {
            const total = config.service.price + config.coffin.price + config.transport.price + config.paper.price;
            document.getElementById('total-price').innerText = `£${total.toLocaleString()}`;
        }

        function submitArrangement() {
            if(config.service.price === 0) {
                alert("Please select a Service Type first.");
                toggleModule('mod-service');
                return;
            }
            // In production: Send JSON to server
            console.log("Final Arrangement:", config);
            alert("Arrangement Submitted. A Director will contact you shortly to confirm.");
        }

        // Init: Open first tab
        // No auto-select to force user choice, but total starts at 0
        updateTotal();

    </script>
</body>
</html>
