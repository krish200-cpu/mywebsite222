<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Funeral Match | Transparency & Choice</title>
    <style>
        :root {
            --primary: #1a2a3a;
            --gold: #b8860b;
            --green: #27ae60;
            --bg: #f8fafc;
            --white: #ffffff;
            --text: #111;
        }

        * { box-sizing: border-box; font-family: 'Inter', system-ui, -apple-system, sans-serif; }
        body { margin: 0; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }

        /* --- AUTOMATED LAYOUT LOGIC --- */
        .app-container { display: flex; max-width: 1200px; margin: 0 auto; gap: 2rem; padding: 20px; }
        
        /* Sidebar: Visible on Desktop, Hidden on Mobile */
        .sidebar { width: 300px; flex-shrink: 0; display: block; }
        
        /* Mobile Filter Bar: Hidden on Desktop, Visible on Mobile */
        .mobile-action-bar { display: none; background: white; padding: 12px 20px; position: sticky; top: 70px; z-index: 90; border-bottom: 1px solid #eee; justify-content: space-between; align-items: center; }

        /* --- HEADER --- */
        header { background: var(--white); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); letter-spacing: -1.5px; }
        .logo span { color: var(--gold); }

        /* --- CARD DESIGN --- */
        .results { flex-grow: 1; }
        .card { 
            background: var(--white); border-radius: 16px; padding: 25px; margin-bottom: 1.5rem; 
            display: grid; grid-template-columns: 1fr 220px; gap: 20px; border: 1px solid #eef0f2; transition: 0.3s;
        }
        .sponsored { border: 2px solid var(--gold); background: #fffef9; }
        .score-pill { display: inline-flex; align-items: center; background: #e8f5e9; color: #2e7d32; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; margin-bottom: 10px; }
        .tag { background: #f0f3f5; padding: 4px 10px; border-radius: 6px; font-size: 0.75rem; color: #555; margin-right: 5px; }

        .price-column { text-align: right; border-left: 1px solid #eee; padding-left: 20px; display: flex; flex-direction: column; justify-content: center; }
        .price-tag { font-size: 1.8rem; font-weight: 800; color: var(--primary); margin: 5px 0; }
        .btn-book { background: var(--green); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; }

        /* --- MOBILE DRAWER --- */
        .filter-drawer { position: fixed; bottom: 0; left: 0; right: 0; background: white; z-index: 200; padding: 30px 20px; border-radius: 20px 20px 0 0; transform: translateY(100%); transition: 0.3s; box-shadow: 0 -10px 30px rgba(0,0,0,0.2); }
        .drawer-active .filter-drawer { transform: translateY(0); }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 199; display: none; }
        .drawer-active .overlay { display: block; }

        /* --- MEDIA QUERIES: THE AUTOMATION --- */
        @media (max-width: 850px) {
            .app-container { flex-direction: column; padding: 10px; }
            .sidebar { display: none; } /* Hide desktop sidebar */
            .mobile-action-bar { display: flex; } /* Show mobile trigger */
            
            .card { grid-template-columns: 1fr; padding: 20px; } /* Stack card content */
            .price-column { border-left: none; border-top: 1px solid #eee; padding-left: 0; padding-top: 20px; text-align: left; }
            .price-tag { font-size: 2rem; }
            
            header { padding: 15px 20px; }
            .logo { font-size: 1.2rem; }
        }

        .filter-label { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; font-size: 0.95rem; cursor: pointer; }
        input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--primary); }
    </style>
</head>
<body>

<header>
    <div class="logo">FUNERAL<span>MATCH</span></div>
    <div style="font-size: 0.75rem; color: var(--gold); font-weight: 700; cursor: pointer;">DIRECTOR LOGIN</div>
</header>

<div class="mobile-action-bar">
    <span style="font-weight: 600; font-size: 0.9rem;">Essex Results</span>
    <button onclick="toggleFilters()" style="background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 20px; font-size: 0.8rem;">Filter & Sort</button>
</div>

<div class="app-container">
    <aside class="sidebar">
        <div style="background: white; padding: 25px; border-radius: 12px; position: sticky; top: 100px;">
            <h3 style="margin-top:0; font-size: 0.9rem; color: var(--gold); letter-spacing: 1px;">SERVICE TYPE</h3>
            <div id="desktopFilters">
                </div>
        </div>
    </aside>

    <main class="results" id="results-list">
        <div class="card sponsored" data-type="celebration" data-price="2850">
            <div>
                <div class="score-pill">✓ 98% Transparency</div>
                <h2 style="margin:0">Rosewood Independent</h2>
                <p style="color: #666; font-size: 0.85rem; margin: 5px 0;">0.8 miles away • Corringham</p>
                <div style="margin: 10px 0;"><span class="tag">Celebration of Life</span><span class="tag">Family Run</span></div>
            </div>
            <div class="price-column">
                <div style="font-size: 0.7rem; color: #888;">ESTIMATED TOTAL</div>
                <div class="price-tag">£2,850</div>
                <button class="btn-book">View Profile</button>
            </div>
        </div>

        <div class="card" data-type="direct_cremation" data-price="950">
            <div>
                <div class="score-pill">✓ 91% Transparency</div>
                <h2 style="margin:0">Essex Direct Care</h2>
                <p style="color: #666; font-size: 0.85rem; margin: 5px 0;">2.1 miles away • Stanford</p>
                <div style="margin: 10px 0;"><span class="tag">Direct Cremation</span><span class="tag">Unattended</span></div>
            </div>
            <div class="price-column">
                <div style="font-size: 0.7rem; color: #888;">FIXED FEE</div>
                <div class="price-tag">£950</div>
                <button class="btn-book">Book Now</button>
            </div>
        </div>
    </main>
</div>

<div class="overlay" onclick="toggleFilters()"></div>
<div class="filter-drawer" id="mobileDrawer">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="margin:0">Filter Services</h2>
        <span onclick="toggleFilters()" style="font-size: 1.5rem; cursor: pointer;">&times;</span>
    </div>
    <div id="mobileFilters"></div>
    <button class="btn-book" onclick="toggleFilters()" style="margin-top: 20px;">Show Matches</button>
</div>

<script>
    // 1. Shared Filter List
    const serviceTypes = [
        { val: 'direct_cremation', label: 'Direct Cremation' },
        { val: 'simple_attended', label: 'Simple Attended' },
        { val: 'traditional_burial', label: 'Traditional Burial' },
        { val: 'celebration', label: 'Celebration of Life' },
        { val: 'memorial', label: 'Memorial Service' },
        { val: 'sea_burial', label: 'Burial at Sea' }
    ];

    // 2. Inject Filters into both Desktop and Mobile containers
    function injectFilters(containerId) {
        const container = document.getElementById(containerId);
        serviceTypes.forEach(type => {
            const label = document.createElement('label');
            label.className = 'filter-label';
            label.innerHTML = `<input type="checkbox" name="type" value="${type.val}" onchange="runFilters()"> ${type.label}`;
            container.appendChild(label);
        });
    }

    injectFilters('desktopFilters');
    injectFilters('mobileFilters');

    // 3. Automation Logic
    function runFilters() {
        const checked = Array.from(document.querySelectorAll('input[name="type"]:checked')).map(i => i.value);
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            const type = card.dataset.type;
            card.style.display = (checked.length === 0 || checked.includes(type)) ? (window.innerWidth <= 850 ? 'block' : 'grid') : 'none';
        });
    }

    function toggleFilters() {
        document.body.classList.toggle('drawer-active');
    }

    // Adjust layout on resize
    window.addEventListener('resize', runFilters);
</script>

</body>
</html>
