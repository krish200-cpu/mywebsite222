<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Funeral Match | Total Specialist v1.4</title>
    <style>
        :root { --primary: #0a1118; --gold: #c5a059; --green: #059669; --blue: #0369a1; --red: #dc2626; --bg: #fcfcfc; --slate: #64748b; }
        * { box-sizing: border-box; font-family: 'Inter', -apple-system, sans-serif; }
        body { margin: 0; background: var(--bg); color: #1a1a1a; padding-bottom: 100px; }

        nav { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 1000; }
        .logo { font-weight: 900; font-size: 1.3rem; color: var(--primary); }
        .logo span { color: var(--gold); }

        .view { display: none; max-width: 1000px; margin: 20px auto; padding: 0 15px; animation: fadeIn 0.3s ease; }
        .view.active { display: block; }

        /* SCROLLABLE SERVICE SELECTOR - Better for adding many options */
        .service-scroll { 
            display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px; 
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .service-scroll::-webkit-scrollbar { display: none; }
        
        .service-tab { 
            flex: 0 0 160px; background: white; border: 1px solid #e2e8f0; padding: 15px; 
            border-radius: 12px; text-align: center; cursor: pointer; transition: 0.2s; 
        }
        .service-tab.active { background: var(--primary); color: white; border-color: var(--primary); }
        .service-tab b { display: block; font-size: 0.85rem; }
        .service-tab span { font-size: 0.65rem; opacity: 0.8; }

        /* THE CARDS */
        .fd-card { background: white; border: 1px solid #e2e8f0; border-radius: 16px; padding: 20px; margin-bottom: 15px; display: flex; flex-direction: column; transition: 0.2s; }
        @media (min-width: 768px) {
            .fd-card { flex-direction: row; justify-content: space-between; }
            .card-right { text-align: right; border-left: 1px solid #eee; padding-left: 25px; min-width: 240px; }
        }

        .status-pill { display: inline-flex; align-items: center; gap: 6px; font-size: 0.65rem; font-weight: 800; padding: 4px 10px; border-radius: 50px; margin-bottom: 10px; background: #f1f5f9; }
        .btn-care { background: var(--green); color: white; border: none; padding: 14px; width: 100%; border-radius: 10px; font-weight: 800; cursor: pointer; margin-top: 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<nav>
    <div class="logo">FUNERAL<span>MATCH</span></div>
    <div style="font-size: 0.7rem; font-weight: 800; color: var(--slate);">SS17 7QQ • MARITIME READY</div>
</nav>

<div id="marketplaceView" class="view active">
    <h1>Bespoke Arrangements</h1>
    
    <div class="service-scroll">
        <div class="service-tab active" onclick="setService('Direct Cremation', 950)"><b>Direct</b><span>Cremation</span></div>
        <div class="service-tab" onclick="setService('Traditional Burial', 2200)"><b>Traditional</b><span>Cemetery Burial</span></div>
        <div class="service-tab" onclick="setService('Burial at Sea', 3800)"><b>Sea Burial</b><span>MMO Licensed</span></div>
        <div class="service-tab" onclick="setService('Woodland', 1850)"><b>Natural</b><span>Woodland Burial</span></div>
        <div class="service-tab" onclick="setService('Repatriation', 4500)"><b>Global</b><span>Repatriation</span></div>
    </div>

    <div id="marketplaceFeed"></div>
</div>

<script>
    const directors = [
        { id: 1, name: "D J Cotton & Sons", dist: "0.2 mi", tScore: 99, priceOffset: 0, isPremium: true, capabilities: ['Direct Cremation', 'Traditional Burial', 'Woodland'] },
        { id: 2, name: "L E Brand & Sons", dist: "1.1 mi", tScore: 94, priceOffset: 120, isPremium: false, capabilities: ['Direct Cremation', 'Traditional Burial', 'Burial at Sea', 'Repatriation'] },
        { id: 3, name: "Specialist Maritime Care", dist: "8.4 mi", tScore: 100, priceOffset: 450, isPremium: true, capabilities: ['Burial at Sea'] }
    ];

    let currentService = { label: 'Direct Cremation', base: 950 };

    function renderMarketplace() {
        const feed = document.getElementById('marketplaceFeed');
        // Filter to only show directors capable of the selected service
        const filtered = directors.filter(d => d.capabilities.includes(currentService.label));
        
        feed.innerHTML = filtered.map(d => `
            <div class="fd-card">
                <div class="card-left">
                    <div class="status-pill" style="color:${d.tScore > 80 ? 'var(--green)' : 'var(--red)'}">
                        ${d.tScore}% TRANSPARENCY RATING
                    </div>
                    <h2 style="margin:0">${d.name}</h2>
                    <p style="color:var(--slate); font-size:0.85rem; margin:5px 0;">${d.dist} from SS17 7QQ</p>
                    <div style="margin-top:10px; font-size:0.75rem;">
                        <span style="color:var(--blue); font-weight:800;">✓ Verified for ${currentService.label}</span>
                    </div>
                </div>
                <div class="card-right">
                    <div style="font-size:0.7rem; font-weight:800; color:var(--slate); margin-top:10px;">FIXED TOTAL</div>
                    <div style="font-size:1.8rem; font-weight:900;">£${(currentService.base + d.priceOffset).toLocaleString()}</div>
                    <button class="btn-care" onclick="alert('Specialist ${currentService.label} Care Initiated.')">Initiate Care</button>
                </div>
            </div>
        `).join('') || `<p style="text-align:center; padding:40px; color:var(--slate);">No directors found for this specialist service in the immediate SS17 area. Expanding search radius...</p>`;
    }

    function setService(label, base) {
        currentService = { label, base };
        document.querySelectorAll('.service-tab').forEach(t => {
            t.classList.toggle('active', t.innerHTML.includes(label));
        });
        renderMarketplace();
    }

    renderMarketplace();
</script>
</body>
</html>
