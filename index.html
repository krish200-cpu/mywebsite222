<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funeral Match | Empathetic Search</title>
    <style>
        :root { --primary: #1a2a3a; --gold: #b8860b; --green: #27ae60; --bg: #fdfdfd; --slate: #64748b; }
        * { box-sizing: border-box; font-family: 'Inter', system-ui, sans-serif; }
        body { margin: 0; background: var(--bg); color: #1e293b; }

        /* HEADER */
        header { background: white; padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f1f5f9; position: sticky; top: 0; z-index: 1000; }
        .logo { font-weight: 900; font-size: 1.5rem; color: var(--primary); letter-spacing: -1.5px; }
        .logo span { color: var(--gold); }

        /* STEPPED NAVIGATION (THE NEW FILTER) */
        .filter-nav { background: white; border-bottom: 1px solid #f1f5f9; padding: 10px 5%; display: flex; gap: 20px; overflow-x: auto; white-space: nowrap; }
        .nav-item { padding: 12px 20px; border-radius: 30px; border: 1px solid #e2e8f0; cursor: pointer; font-size: 0.9rem; font-weight: 600; color: var(--slate); transition: 0.2s; }
        .nav-item.active { background: var(--primary); color: white; border-color: var(--primary); }
        .nav-item:hover:not(.active) { background: #f8fafc; }

        /* MAIN CONTENT */
        .container { max-width: 900px; margin: 30px auto; padding: 0 20px; padding-bottom: 120px; }
        .card { background: white; border-radius: 20px; padding: 30px; margin-bottom: 20px; border: 1px solid #f1f5f9; display: grid; grid-template-columns: 1fr 200px; gap: 20px; transition: 0.3s; }
        .card:hover { border-color: var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.04); }

        /* INSTANT QUOTE BAR (MOBILE FIRST) */
        .quote-bar { position: fixed; bottom: 0; left: 0; right: 0; background: var(--primary); color: white; padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; z-index: 2000; box-shadow: 0 -10px 30px rgba(0,0,0,0.2); }
        .quote-info h4 { margin: 0; font-size: 0.75rem; color: var(--gold); text-transform: uppercase; }
        .quote-info p { margin: 5px 0 0 0; font-size: 1.4rem; font-weight: 800; }
        .btn-main { background: var(--green); color: white; border: none; padding: 15px 30px; border-radius: 12px; font-weight: 800; cursor: pointer; }

        /* REPATRIATION SPECIAL UI */
        .repatriation-badge { background: #fee2e2; color: #991b1b; padding: 4px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: 700; display: inline-block; margin-bottom: 10px; }

        @media (max-width: 700px) {
            .card { grid-template-columns: 1fr; }
            .quote-bar { flex-direction: column; gap: 15px; text-align: center; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo">FUNERAL<span>MATCH</span></div>
    <div style="font-size: 0.8rem; font-weight: 700; color: var(--slate);">UK NATIONWIDE</div>
</header>

<div class="filter-nav" id="typeFilters">
    <div class="nav-item active" onclick="setSrv('all', this)">All Services</div>
    <div class="nav-item" onclick="setSrv('direct_cremation', this)">Direct Cremation</div>
    <div class="nav-item" onclick="setSrv('repatriation', this)">Repatriation</div>
    <div class="nav-item" onclick="setSrv('sea_burial', this)">Sea Burial</div>
    <div class="nav-item" onclick="setSrv('celebration', this)">Celebration of Life</div>
</div>

<div class="filter-nav" style="border-top:none; padding-top:0;">
    <div style="font-size: 0.8rem; color: var(--slate); align-self:center; margin-right: 10px;">ADD-ONS:</div>
    <div class="nav-item" id="btn-limo" onclick="toggleAddon('limo', 500)">+ Limousine (£500)</div>
    <div class="nav-item" id="btn-view" onclick="toggleAddon('viewing', 400)">+ Viewing (£400)</div>
</div>

<div class="container" id="results">
    </div>

<div class="quote-bar">
    <div class="quote-info">
        <h4>Live Estimated Quote</h4>
        <p id="totalQuote">£0</p>
    </div>
    <button class="btn-main" onclick="alert('Proceeding to lead capture...')">Compare Detailed Prices</button>
</div>

<script>
    const db = [
        { name: "Global Repatriation Experts", base: 4200, type: "repatriation", loc: "London", rating: 4.9, desc: "Specialists in international transit and documentation." },
        { name: "Essex Direct Care", base: 950, type: "direct_cremation", loc: "Essex", rating: 4.5, desc: "Simple, dignified unattended cremation." },
        { name: "Rosewood Independent", base: 1850, type: "celebration", loc: "Essex", rating: 4.8, desc: "A personalized service celebrating life." },
        { name: "Thameside Sea Burials", base: 3100, type: "sea_burial", loc: "Southend", rating: 4.7, desc: "Environmentally friendly services at sea." }
    ];

    let currentSrv = 'all';
    let addons = { limo: 0, viewing: 0 };

    function setSrv(type, el) {
        document.querySelectorAll('#typeFilters .nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        currentSrv = type;
        render();
    }

    function toggleAddon(id, price) {
        const el = document.getElementById('btn-' + id);
        if (addons[id] === 0) {
            addons[id] = price;
            el.classList.add('active');
        } else {
            addons[id] = 0;
            el.classList.remove('active');
        }
        render();
    }

    function render() {
        const list = document.getElementById('results');
        const addonTotal = Object.values(addons).reduce((a, b) => a + b, 0);
        const filtered = db.filter(d => currentSrv === 'all' || d.type === currentSrv);
        
        list.innerHTML = '';
        let lowestPrice = Infinity;

        filtered.forEach(d => {
            const final = d.base + addonTotal;
            if (final < lowestPrice) lowestPrice = final;

            list.innerHTML += `
                <div class="card">
                    <div>
                        ${d.type === 'repatriation' ? '<span class="repatriation-badge">INTERNATIONAL SPECIALIST</span>' : ''}
                        <h2 style="margin:0">${d.name}</h2>
                        <p style="color:var(--slate); margin:5px 0;">${d.loc} • ⭐ ${d.rating}</p>
                        <p style="font-size:0.9rem; color:#444;">${d.desc}</p>
                    </div>
                    <div style="text-align:right; align-self:center;">
                        <div style="font-size:0.7rem; font-weight:800; color:var(--gold);">PENNY-PERFECT PRICE</div>
                        <div style="font-size:1.8rem; font-weight:900;">£${final.toLocaleString()}</div>
                        <button style="background:var(--primary); color:white; border:none; padding:10px 15px; border-radius:8px; margin-top:10px; cursor:pointer; width:100%;">View Breakdown</button>
                    </div>
                </div>
            `;
        });

        document.getElementById('totalQuote').innerText = lowestPrice === Infinity ? '£0' : 'From £' + lowestPrice.toLocaleString();
    }

    render();
</script>

</body>
</html>
