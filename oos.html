<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Curated Typography | FuneralMatch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;1,6..96,400&family=Cinzel:wght@400;700&family=Cormorant:ital,wght@0,400;0,600;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=EB+Garamond:ital,wght@0,400;0,700;1,400&family=Garamond&family=IBM+Plex+Serif:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,600;1,400&family=Marcellus&family=Merriweather:ital,wght@0,300;0,700;1,300&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Source+Serif+Pro:wght@400;600&family=Spectral:ital,wght@0,400;0,600;1,400&family=Nunito:wght@400;700&family=Lato:wght@400;700&family=Open+Sans:wght@400;700&family=Roboto:wght@400;700&family=Cardo&family=DM+Serif+Display&display=swap" rel="stylesheet">

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg: #050505;
            --surface: #121212;
            --border: #222;
            --gold: #D4AF37;
            --page-ratio: 1.414;
        }

        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        /* --- WORKSPACE --- */
        .workspace-container {
            height: 100%;
            overflow-y: auto;
            scroll-behavior: smooth;
            padding: 80px 20px 160px 20px;
            display: flex; flex-direction: column; align-items: center; gap: 40px;
        }

        .page-card {
            width: 100%; max-width: 500px; aspect-ratio: 1 / var(--page-ratio);
            background: white; color: black; position: relative; border-radius: 4px;
            box-shadow: 0 20px 50px -10px rgba(0,0,0,0.5); transition: 0.3s ease;
        }
        
        /* Editables */
        [contenteditable="true"] {
            outline: none; border: 1px dashed transparent; transition: 0.2s; cursor: text;
        }
        [contenteditable="true"]:hover { border-color: var(--gold); background: rgba(0,0,0,0.02); }
        [contenteditable="true"]:focus { border-color: var(--gold); background: rgba(212, 175, 55, 0.05); }

        /* --- FONT DRAWER (The Star) --- */
        #font-drawer {
            position: fixed; bottom: 0; left: 0; right: 0; height: 85vh;
            background: #111; border-top-left-radius: 24px; border-top-right-radius: 24px;
            z-index: 100; transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex; flex-direction: column; box-shadow: 0 -20px 60px rgba(0,0,0,0.9);
            border-top: 1px solid #333;
        }
        #font-drawer.open { transform: translateY(0); }

        .drawer-header {
            padding: 20px; border-bottom: 1px solid #222;
            display: flex; flex-direction: column; gap: 16px; background: rgba(17,17,17,0.95);
        }

        .search-input {
            width: 100%; background: #050505; border: 1px solid #333; color: white;
            padding: 14px 16px; border-radius: 12px; font-size: 14px; outline: none;
            transition: 0.2s;
        }
        .search-input:focus { border-color: var(--gold); }

        /* Font List Layout */
        .font-list {
            flex: 1; overflow-y: auto; padding: 0 0 40px 0;
        }

        .font-category-header {
            position: sticky; top: 0; background: #1a1a1a;
            padding: 12px 20px; font-size: 10px; font-weight: 700; 
            text-transform: uppercase; letter-spacing: 0.1em; color: #888;
            border-bottom: 1px solid #222; border-top: 1px solid #222; z-index: 10;
        }

        .font-item {
            padding: 16px 20px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #222; transition: 0.2s;
        }
        .font-item:hover { background: #222; }
        .font-item.selected { background: rgba(197, 160, 89, 0.1); }
        .font-item.selected .font-name { color: var(--gold); }

        .font-name { font-size: 18px; color: white; margin-bottom: 4px; }
        .font-meta { font-size: 10px; color: #555; text-transform: uppercase; }

        /* --- HEADER & DOCK --- */
        .glass-bar {
            background: rgba(20, 20, 20, 0.95); backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .top-bar {
            position: fixed; top: 0; left: 0; right: 0; height: 60px; z-index: 50;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
        }
        .dock {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            border-radius: 99px; padding: 8px; z-index: 50; display: flex; gap: 8px;
        }
        .dock-btn {
            height: 48px; padding: 0 24px; border-radius: 99px; font-size: 11px;
            font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;
            display: flex; align-items: center; gap: 8px; cursor: pointer;
            color: #ccc; border: 1px solid transparent; background: rgba(255,255,255,0.05);
        }
        .dock-btn.primary { background: var(--gold); color: black; }

    </style>
</head>
<body>

    <div class="glass-bar top-bar">
        <div>
            <span class="text-[9px] uppercase font-bold text-[#D4AF37] tracking-widest block">FuneralMatch</span>
            <span class="text-xs font-bold text-white">Typography Suite</span>
        </div>
        <button class="text-xs font-bold text-[#D4AF37]" onclick="alert('Saving...')">Save</button>
    </div>

    <div class="workspace-container" id="workspace">
        <div class="page-card">
            <div class="h-full flex flex-col items-center justify-center text-center p-8">
                <div class="mb-6 text-xs uppercase tracking-widest text-gray-500" contenteditable="true" onfocus="setActive(this)">In Loving Memory of</div>
                <div class="w-40 h-40 rounded-full bg-gray-100 mb-6 flex items-center justify-center text-gray-300 border-4 border-double border-gray-200">
                    <i class="fas fa-camera text-2xl"></i>
                </div>
                <div class="text-5xl mb-4 leading-tight" style="font-family: 'Garamond', serif;" contenteditable="true" onfocus="setActive(this)">Eleanor<br>Rigby</div>
                <div class="text-sm mb-8 text-gray-600" contenteditable="true" onfocus="setActive(this)">1950 â€” 2026</div>
                <div class="mt-auto text-[10px] uppercase font-bold text-gray-400" contenteditable="true" onfocus="setActive(this)">St Mary's Church</div>
            </div>
        </div>
    </div>

    <div class="glass-bar dock">
        <button class="dock-btn" onclick="openFontDrawer()">
            <i class="fas fa-font"></i> <span>Typography</span>
        </button>
        <button class="dock-btn primary">
            <span>Done</span>
        </button>
    </div>

    <div id="font-drawer">
        <div class="drawer-header">
            <div class="flex justify-between items-center">
                <span class="text-xs font-bold text-gray-500 uppercase tracking-widest">Select Typeface</span>
                <button onclick="closeFontDrawer()" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <input type="text" id="font-search" class="search-input" placeholder="Search curated fonts..." onkeyup="filterFonts()">
        </div>
        
        <div class="font-list" id="font-list-container">
            </div>
    </div>

    <script>
        // === 1. CURATED FONT DATABASE (Categorized) ===
        // Mapped to Web-Safe or Google Font Equivalents for live rendering
        const FONT_DATA = [
            {
                category: "Classic Serif (Traditional)",
                fonts: [
                    { name: "Garamond", family: "'EB Garamond', serif" },
                    { name: "Baskerville", family: "'Libre Baskerville', serif" },
                    { name: "Times New Roman", family: "'Times New Roman', serif" },
                    { name: "Palatino", family: "'Palatino Linotype', 'Book Antiqua', serif" },
                    { name: "Sabon", family: "'Crimson Text', serif" }, // Web approx
                    { name: "Bembo", family: "'Cardo', serif" }, // Web approx
                    { name: "Caslon", family: "'Libre Caslon Text', serif" },
                    { name: "Minion Pro", family: "'Crimson Text', serif" }, // Web approx
                    { name: "Perpetua", family: "'Baskerville', serif" }, // Web approx
                    { name: "Book Antiqua", family: "'Book Antiqua', serif" }
                ]
            },
            {
                category: "Soft Modern Serif (Elegant)",
                fonts: [
                    { name: "Georgia", family: "Georgia, serif" },
                    { name: "Merriweather", family: "'Merriweather', serif" },
                    { name: "Crimson Text", family: "'Crimson Text', serif" },
                    { name: "Cormorant", family: "'Cormorant', serif" },
                    { name: "Charter", family: "'Charter', 'Bitstream Charter', serif" },
                    { name: "Spectral", family: "'Spectral', serif" },
                    { name: "Tisa", family: "'Merriweather', serif" }, // Web approx
                    { name: "Libre Baskerville", family: "'Libre Baskerville', serif" }
                ]
            },
            {
                category: "Neutral Sans-Serif (Clean)",
                fonts: [
                    { name: "Helvetica", family: "Helvetica, Arial, sans-serif" },
                    { name: "Helvetica Neue", family: "'Helvetica Neue', Arial, sans-serif" },
                    { name: "Arial", family: "Arial, sans-serif" },
                    { name: "Gill Sans", family: "'Gill Sans', 'Gill Sans MT', sans-serif" },
                    { name: "Optima", family: "'Marcellus', sans-serif" }, // Web approx (Marcellus has Optima vibe)
                    { name: "Avenir", family: "'Nunito', sans-serif" }, // Web approx
                    { name: "Univers", family: "'Roboto', sans-serif" }, // Web approx
                    { name: "Calibri", family: "Calibri, sans-serif" },
                    { name: "Segoe UI", family: "'Segoe UI', sans-serif" },
                    { name: "Frutiger", family: "'Hind', sans-serif" } // Web approx
                ]
            },
            {
                category: "Subtle Formal Display (Names)",
                fonts: [
                    { name: "Trajan Pro", family: "'Cinzel', serif" }, // Web approx
                    { name: "Copperplate", family: "Copperplate, serif" },
                    { name: "Didot", family: "'Playfair Display', serif" }, // Web approx
                    { name: "Bodoni", family: "'Bodoni Moda', serif" },
                    { name: "Cinzel", family: "'Cinzel', serif" },
                    { name: "Playfair Display", family: "'Playfair Display', serif" },
                    { name: "EB Garamond", family: "'EB Garamond', serif" },
                    { name: "Adobe Caslon Pro", family: "'Libre Caslon Text', serif" },
                    { name: "Lora", family: "'Lora', serif" },
                    { name: "Libre Caslon Text", family: "'Libre Caslon Text', serif" },
                    { name: "Source Serif Pro", family: "'Source Serif Pro', serif" },
                    { name: "IBM Plex Serif", family: "'IBM Plex Serif', serif" }
                ]
            }
        ];

        let activeElement = null; // The text currently being edited

        // === 2. INIT ===
        function init() {
            renderFontList();
            
            // Auto-select the main name on load
            setTimeout(() => {
                const nameEl = document.querySelector('.text-5xl');
                setActive(nameEl);
            }, 500);
        }

        // === 3. RENDER FONT LIST ===
        function renderFontList() {
            const container = document.getElementById('font-list-container');
            container.innerHTML = '';

            FONT_DATA.forEach(group => {
                // Header
                const header = document.createElement('div');
                header.className = 'font-category-header';
                header.innerText = group.category;
                container.appendChild(header);

                // Fonts
                group.fonts.forEach(font => {
                    const item = document.createElement('div');
                    item.className = 'font-item';
                    item.onclick = () => applyFont(font.name, font.family);
                    
                    item.innerHTML = `
                        <div class="flex-1">
                            <div class="font-name" style="font-family: ${font.family}">${font.name}</div>
                            <div class="font-meta">${group.category.split(' ')[0]}</div>
                        </div>
                        <i class="fas fa-check text-[#D4AF37] opacity-0 check-icon"></i>
                    `;
                    
                    // Store search data
                    item.dataset.search = (font.name + " " + group.category).toLowerCase();
                    container.appendChild(item);
                });
            });
        }

        // === 4. ACTIVE ELEMENT LOGIC ===
        function setActive(el) {
            // Remove previous focus style
            if(activeElement) activeElement.style.border = '1px dashed transparent';
            
            activeElement = el;
            activeElement.style.border = '1px dashed #D4AF37';
        }

        // === 5. APPLY FONT LOGIC ===
        function applyFont(name, familyStr) {
            if(!activeElement) {
                alert("Tap a text area on the page first.");
                return;
            }

            // Apply style
            activeElement.style.fontFamily = familyStr;

            // Visual Feedback in List
            document.querySelectorAll('.font-item').forEach(el => {
                el.classList.remove('selected');
                el.querySelector('.check-icon').classList.add('opacity-0');
            });
            event.currentTarget.classList.add('selected');
            event.currentTarget.querySelector('.check-icon').classList.remove('opacity-0');
        }

        // === 6. DRAWER CONTROLS ===
        function openFontDrawer() {
            if(!activeElement) {
                // Auto-select name if nothing selected
                setActive(document.querySelector('.text-5xl'));
            }
            document.getElementById('font-drawer').classList.add('open');
        }

        function closeFontDrawer() {
            document.getElementById('font-drawer').classList.remove('open');
        }

        function filterFonts() {
            const query = document.getElementById('font-search').value.toLowerCase();
            const items = document.querySelectorAll('.font-item');
            const headers = document.querySelectorAll('.font-category-header');

            items.forEach(item => {
                if(item.dataset.search.includes(query)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });

            // Hide headers if no children are visible (Basic logic)
            // Ideally we check visibility of next siblings
        }

        // Boot
        init();

    </script>
</body>
</html>
